(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/companion-post/companion-post"],{"02ea":function(e,t,n){"use strict";n.d(t,"b",(function(){return u})),n.d(t,"c",(function(){return i})),n.d(t,"a",(function(){return o}));var o={uForm:function(){return Promise.all([n.e("common/vendor"),n.e("uview-ui/components/u-form/u-form")]).then(n.bind(null,"dd44"))},uIcon:function(){return Promise.all([n.e("common/vendor"),n.e("uview-ui/components/u-icon/u-icon")]).then(n.bind(null,"899d"))},uButton:function(){return Promise.all([n.e("common/vendor"),n.e("uview-ui/components/u-button/u-button")]).then(n.bind(null,"6181"))},uFormItem:function(){return Promise.all([n.e("common/vendor"),n.e("uview-ui/components/u-form-item/u-form-item")]).then(n.bind(null,"70c8"))},uTextarea:function(){return Promise.all([n.e("common/vendor"),n.e("uview-ui/components/u-textarea/u-textarea")]).then(n.bind(null,"1b45"))},uUpload:function(){return Promise.all([n.e("common/vendor"),n.e("uview-ui/components/u-upload/u-upload")]).then(n.bind(null,"92c5"))}},u=function(){var e=this.$createElement;this._self._c},i=[]},"16de":function(e,t,n){},"4c60":function(e,t,n){"use strict";var o=n("16de"),u=n.n(o);u.a},"584d":function(e,t,n){"use strict";n.r(t);var o=n("02ea"),u=n("71d0");for(var i in u)["default"].indexOf(i)<0&&function(e){n.d(t,e,(function(){return u[e]}))}(i);n("4c60");var r=n("828b"),a=Object(r["a"])(u["default"],o["b"],o["c"],!1,null,null,null,!1,o["a"],void 0);t["default"]=a.exports},"6f3d":function(e,t,n){"use strict";(function(e,t){var o=n("47a9");n("f891"),n("861b");o(n("3240"));var u=o(n("584d"));e.__webpack_require_UNI_MP_PLUGIN__=n,t(u.default)}).call(this,n("3223")["default"],n("df3c")["createPage"])},"71d0":function(e,t,n){"use strict";n.r(t);var o=n("ff9f"),u=n.n(o);for(var i in o)["default"].indexOf(i)<0&&function(e){n.d(t,e,(function(){return o[e]}))}(i);t["default"]=u.a},ff9f:function(e,t,n){"use strict";(function(e,o){var u=n("47a9");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=u(n("7eb4")),r=u(n("7ca3")),a=u(n("ee10"));function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach((function(t){(0,r.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var s={data:function(){return{fileList1:[],imgStyle:{height:80,width:80},imageValue:[],picurls:[],rules:{},dataValue:{hb:"",head:"",detail:"",type:"",situation:"inner"},username:"",list:["社团","社团","科研","兼职"],curNow:0,views:["社团","科研","搭伙","兼职"],activeIndex:null}},methods:{deletePic:function(e){this["fileList".concat(e.name)].splice(e.index,1)},afterRead:function(e){var t=this;return(0,a.default)(i.default.mark((function n(){var o,u,r,a,c,s;return i.default.wrap((function(n){while(1)switch(n.prev=n.next){case 0:o=[].concat(e.file),t["fileList".concat(e.name)].length,o.map((function(n){t["fileList".concat(e.name)].push(l(l({},n),{},{status:"uploading",message:"上传中"}))})),u=0;case 4:if(!(u<o.length)){n.next=22;break}return r=o[u],n.prev=6,n.next=9,t.uploadToUniCloud(r.url);case 9:a=n.sent,c=t.fileList1.length-1,t.fileList1.splice(c,1,l(l({},r),{},{status:"success",message:"",url:a.fileID})),n.next=19;break;case 14:n.prev=14,n.t0=n["catch"](6),s=t.fileList1.length-1,t.fileList1.splice(s,1,l(l({},r),{},{status:"failed",message:"上传失败"})),console.error("上传失败:",n.t0);case 19:u++,n.next=4;break;case 22:case"end":return n.stop()}}),n,null,[[6,14]])})))()},uploadToUniCloud:function(t){var n=this;return new Promise((function(o,u){e.uploadFile({filePath:t,cloudPath:"images/".concat(Date.now(),"_").concat(Math.random().toString(36).slice(2),".jpg"),success:function(e){o(e),console.log("res",e),n.picurls.push(e.fileID)},fail:function(e){u(e)}})}))},uploadSuccess:function(e){this.picurls=e.tempFilePaths,console.log(e,this.picurls)},onSubmit:function(t){var n=this;return(0,a.default)(i.default.mark((function t(){var u,r;return i.default.wrap((function(t){while(1)switch(t.prev=t.next){case 0:try{u=n,n.list[u.curNow],console.log(n.dataValue),r=n.dataValue,e.callFunction({name:"art_add_row",data:{detail:r,picurls:n.picurls,hType:"dz"}}).then((function(e){console.log("res",e),o.showToast({title:"提交成功",icon:"success"}),setTimeout((function(){o.reLaunch({url:"/pages/post-home/post-home"})}),1e3)}))}catch(i){console.error("上传失败",i)}case 1:case"end":return t.stop()}}),t)})))()},sectionChange:function(e){this.curNow=e},setActive:function(e){this.activeIndex=e,0==e?this.dataValue.type="社团":1==e?this.dataValue.type="科研":2==e?this.dataValue.type="找搭子":3==e&&(this.dataValue.type="兼职")}}};t.default=s}).call(this,n("861b")["uniCloud"],n("df3c")["default"])}},[["6f3d","common/runtime","common/vendor"]]]);