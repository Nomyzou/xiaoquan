(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/user-profile/user-profile"],{"19d4":function(e,n,t){"use strict";t.r(n);var o=t("21d3"),a=t.n(o);for(var r in o)["default"].indexOf(r)<0&&function(e){t.d(n,e,(function(){return o[e]}))}(r);n["default"]=a.a},"21d3":function(e,n,t){"use strict";(function(e,o){var a=t("47a9");Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r=a(t("7eb4")),u=a(t("ee10")),c={data:function(){return{userInfo:{avatarUrl:"https://cdn.uviewui.com/uview/album/1.jpg",nickName:"小凡古"}}},methods:{gotoDetail:function(){e.navigateTo({url:"/pages/detail/detail"})},uploadAvatar:function(){var n=this;e.chooseImage({count:1,sizeType:["compressed"],sourceType:["album","camera"],success:function(t){var a=t.tempFilePaths[0];o.uploadFile({cloudPath:"avatars/".concat(Date.now(),"-").concat(Math.random(),".jpg"),filePath:a,success:function(t){n.userInfo.avatarUrl=t.fileID,e.setStorageSync("userInfo",n.userInfo),n.updateUserInfo(),e.showToast({title:"头像上传成功",icon:"success"})},fail:function(n){console.error("头像上传失败：",n),e.showToast({title:"头像上传失败",icon:"none"})}})}})},changeName:function(){var n=this;e.showModal({title:"修改名称",content:"请输入新的名称",editable:!0,success:function(t){t.confirm&&t.content&&(n.userInfo.nickName=t.content,e.setStorageSync("userInfo",n.userInfo),n.updateUserInfo(),e.showToast({title:"名称修改成功",icon:"success"}))}})},updateUserInfo:function(){var n=this;return(0,u.default)(r.default.mark((function t(){var a,u;return r.default.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(a=e.getStorageSync("token"),a){t.next=4;break}return console.error("未找到登录态"),t.abrupt("return");case 4:return t.prev=4,t.next=7,o.callFunction({name:"updateUserInfo",data:{token:a,userInfo:n.userInfo}});case 7:u=t.sent,0===u.result.code?console.log("用户信息更新成功"):console.error("用户信息更新失败：",u.result.message),t.next=14;break;case 11:t.prev=11,t.t0=t["catch"](4),console.error("请求失败：",t.t0);case 14:case"end":return t.stop()}}),t,null,[[4,11]])})))()},goToLogin:function(){e.navigateTo({url:"/pages/login/login"})}},onLoad:function(){var n=e.getStorageSync("userInfo");n&&(this.userInfo=n)}};n.default=c}).call(this,t("df3c")["default"],t("861b")["uniCloud"])},"3ab8":function(e,n,t){},7332:function(e,n,t){"use strict";(function(e,n){var o=t("47a9");t("f891"),t("861b");o(t("3240"));var a=o(t("9069"));e.__webpack_require_UNI_MP_PLUGIN__=t,n(a.default)}).call(this,t("3223")["default"],t("df3c")["createPage"])},9069:function(e,n,t){"use strict";t.r(n);var o=t("d3bd"),a=t("19d4");for(var r in a)["default"].indexOf(r)<0&&function(e){t.d(n,e,(function(){return a[e]}))}(r);t("b52b");var u=t("828b"),c=Object(u["a"])(a["default"],o["b"],o["c"],!1,null,null,null,!1,o["a"],void 0);n["default"]=c.exports},b52b:function(e,n,t){"use strict";var o=t("3ab8"),a=t.n(o);a.a},d3bd:function(e,n,t){"use strict";t.d(n,"b",(function(){return a})),t.d(n,"c",(function(){return r})),t.d(n,"a",(function(){return o}));var o={uIcon:function(){return Promise.all([t.e("common/vendor"),t.e("uview-ui/components/u-icon/u-icon")]).then(t.bind(null,"899d"))},Newsbox:function(){return t.e("components/Newsbox/Newsbox").then(t.bind(null,"8776"))}},a=function(){var e=this.$createElement;this._self._c},r=[]}},[["7332","common/runtime","common/vendor"]]]);