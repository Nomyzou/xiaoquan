(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/discussion-detail/discussion-detail"],{"3ccf":function(t,n,e){"use strict";(function(t,n){var o=e("47a9");e("f891"),e("861b");o(e("3240"));var i=o(e("4756"));t.__webpack_require_UNI_MP_PLUGIN__=e,n(i.default)}).call(this,e("3223")["default"],e("df3c")["createPage"])},4756:function(t,n,e){"use strict";e.r(n);var o=e("7c0c"),i=e("77eb");for(var s in i)["default"].indexOf(s)<0&&function(t){e.d(n,t,(function(){return i[t]}))}(s);e("9d1d");var c=e("828b"),a=Object(c["a"])(i["default"],o["b"],o["c"],!1,null,null,null,!1,o["a"],void 0);n["default"]=a.exports},"77eb":function(t,n,e){"use strict";e.r(n);var o=e("d707"),i=e.n(o);for(var s in o)["default"].indexOf(s)<0&&function(t){e.d(n,t,(function(){return o[t]}))}(s);n["default"]=i.a},"7c0c":function(t,n,e){"use strict";e.d(n,"b",(function(){return i})),e.d(n,"c",(function(){return s})),e.d(n,"a",(function(){return o}));var o={uButton:function(){return Promise.all([e.e("common/vendor"),e.e("uview-ui/components/u-button/u-button")]).then(e.bind(null,"6181"))},QAbox:function(){return e.e("components/QAbox/QAbox").then(e.bind(null,"7764"))}},i=function(){var t=this.$createElement,n=(this._self._c,this.detailData.answer.length);this.$mp.data=Object.assign({},{$root:{g0:n}})},s=[]},"8e35":function(t,n,e){},"9d1d":function(t,n,e){"use strict";var o=e("8e35"),i=e.n(o);i.a},d707:function(t,n,e){"use strict";(function(t,e){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var o={data:function(){return{detailData:{head:"",detail:"",answer:[]},discussionId:"",isCreator:!1}},onLoad:function(){var n=this,e=this.getOpenerEventChannel();e.on("sendData",(function(e){n.detailData=e,n.discussionId=e.id,n.isCreator=e.ID_token===t.getStorageSync("token"),console.log("接收到的数据：",e),console.log("isCreatortoken:",e.ID_token),console.log("isCreator:",t.getStorageSync("token"))}))},methods:{gotoWriteAnswer:function(){t.navigateTo({url:"/pages/write-answer/write-answer?discussionId=".concat(this.discussionId)})},showActionSheet:function(){var n=this;t.showActionSheet({itemList:["删除问题","编辑问题"],success:function(t){0===t.tapIndex?n.deleteDiscussion():1===t.tapIndex&&n.editDiscussion()}})},deleteDiscussion:function(){var n=this;t.showModal({title:"提示",content:"确定要删除这个问题吗？",success:function(o){o.confirm&&e.callFunction({name:"deleteDiscussion",data:{id:n.discussionId,token:t.getStorageSync("token")}}).then((function(n){200===n.result.code?(t.showToast({title:"删除成功",icon:"success"}),setTimeout((function(){t.navigateBack()}),1500)):t.showToast({title:n.result.msg||"删除失败",icon:"error"})})).catch((function(n){console.error("删除失败：",n),t.showToast({title:"删除失败",icon:"error"})}))}})},editDiscussion:function(){t.navigateTo({url:"/pages/discussion-post/discussion-post?id=".concat(this.discussionId,"&title=").concat(encodeURIComponent(this.detailData.head),"&content=").concat(encodeURIComponent(this.detailData.detail),"&isEdit=true")})}}};n.default=o}).call(this,e("df3c")["default"],e("861b")["uniCloud"])}},[["3ccf","common/runtime","common/vendor"]]]);